<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Relógio Brasília</title>
    <style>
        body { background: #000; color: #00ff00; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { text-align: center; border: 1px solid #00ff00; padding: 40px; box-shadow: 0 0 15px #00ff00; }
        #hora { font-size: 5rem; font-weight: bold; }
        #status { font-size: 0.9rem; margin-top: 15px; color: #aaa; }
    </style>
</head>
<body>

<div class="box">
    <div style="letter-spacing: 5px;">BRASÍLIA</div>
    <div id="hora">--:--:--</div>
</div>

<script>
    let timestampAtual = 0; // Armazena o tempo em milissegundos

    async function sincronizarComServidor() {
        try {
            // Usando a WorldTimeAPI para pegar o horário real de Brasília
            const response = await fetch('https://worldtimeapi.org/api/timezone/America/Sao_Paulo');
            const data = await response.json();
            
            // Transformamos a data do servidor em milissegundos Unix
            // Agora o controle é totalmente nosso (numérico)
            timestampAtual = new Date(data.datetime).getTime();
            
            document.getElementById('status').textContent = "Sincronizado via Web (Independente do PC)";
            document.getElementById('status').style.color = "#00ff00";
        } catch (e) {
            document.getElementById('status').textContent = "Erro de conexão. Verifique a internet.";
            document.getElementById('status').style.color = "red";
        }
    }

    function motorDoRelogio() {
        if (timestampAtual > 0) {
            // Adicionamos 1000ms (1 segundo) ao nosso contador interno
            timestampAtual += 1000;

            // Criamos o objeto de data baseado APENAS no nosso contador
            const dataObjeto = new Date(timestampAtual);

            const h = String(dataObjeto.getHours()).padStart(2, '0');
            const m = String(dataObjeto.getMinutes()).padStart(2, '0');
            const s = String(dataObjeto.getSeconds()).padStart(2, '0');

            document.getElementById('hora').textContent = `${h}:${m}:${s}`;
        }
    }

    // Inicia a sincronização inicial
    sincronizarComServidor();

    // O relógio atualiza a cada 1 segundo incrementando nossa variável
    setInterval(motorDoRelogio, 1000);

    // Re-sincroniza com a internet a cada 10 minutos para evitar desvios mínimos de processamento
    setInterval(sincronizarComServidor, 600000);
</script>

</body>
</html>

